import Head from 'next/head';
import Beers from '@/layouts/Beers/Beers';
import BeerData from '@/interfaces/BeerData';
import { Container } from '@/styles/index';

const BeerEndPoint = 'https://api.punkapi.com/v2/beers';

export const getServerSideProps = async () => {
  try {
    const res = await fetch(BeerEndPoint);
    const data = await res.json();
    return { props: { beers: data } };
  } catch (error) {
    console.error(error);
  }
};

const Home = (props: { beers: BeerData[] }) => {
  const { beers } = props;
  return (
    <>
      <Head>
        <title>Punk API</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <main>
        <Container>
          <Beers beers={beers} />
        </Container>
      </main>
    </>
  );
};

export default Home;
